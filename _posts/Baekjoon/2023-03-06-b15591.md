---
layout: post
title:  "[ë°±ì¤€] 15591 MooTube"
author: yj
category: [ ë°±ì¤€ ðŸ“ ]
tags: [ ì•Œê³ ë¦¬ì¦˜, bfs ]
---

## [ë°±ì¤€ 15591 MooTube](https://www.acmicpc.net/problem/15591)

### ë¬¸ì œ

ë†ë¶€ ì¡´ì€ ë‚¨ëŠ” ì‹œê°„ì— MooTubeë¼ ë¶ˆë¦¬ëŠ” ë™ì˜ìƒ ê³µìœ  ì„œë¹„ìŠ¤ë¥¼ ë§Œë“¤ì—ˆë‹¤.

MooTubeì—ì„œ ë†ë¶€ ì¡´ì˜ ì†Œë“¤ì€ ìž¬ë°ŒëŠ” ë™ì˜ìƒì„ ì„œë¡œ ê³µìœ í•  ìˆ˜ ìžˆë‹¤.

ì†Œë“¤ì€ MooTubeì— 1ë¶€í„° Nê¹Œì§€ ë²ˆí˜¸ê°€ ë¶™ì—¬ì§„ Nê°œì˜ ë™ì˜ìƒì„ ì´ë¯¸ ì˜¬ë ¤ ë†“ì•˜ë‹¤.

í•˜ì§€ë§Œ ì¡´ì€ ì•„ì§ ì–´ë–»ê²Œ í•˜ë©´ ì†Œë“¤ì´ ê·¸ë“¤ì´ ì¢‹ì•„í•  ë§Œí•œ ìƒˆ ë™ì˜ìƒì„ ì°¾ì„ ìˆ˜ ìžˆì„ì§€ ê´œì°®ì€ ë°©ë²•ì„ ë– ì˜¬ë¦¬ì§€ ëª»í–ˆë‹¤.

ì¡´ì€ MooTube ë™ì˜ìƒì— ëŒ€í•´ ì—°ê´€ ë™ì˜ìƒ ë¦¬ìŠ¤íŠ¸ë¥¼ ë§Œë“¤ê¸°ë¡œ í–ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ì†Œë“¤ì€ ì§€ê¸ˆ ë³´ê³  ìžˆëŠ” ë™ì˜ìƒê³¼ ì—°ê´€ì„± ìžˆëŠ” ì˜ìƒì„ ì¶”ì²œë°›ì„ ìˆ˜ ìžˆë‹¤.

ì¡´ì€ ë‘ ë™ì˜ìƒì´ ì„œë¡œ ì–¼ë§ˆë‚˜ ê°€ê¹Œìš´ì§€ ì¸¡ì •í•˜ëŠ” ë‹¨ìœ„ì¸ `USADO`ë¥¼ ë§Œë“¤ì—ˆë‹¤.

ì¡´ì€ N-1ê°œì˜ ë™ì˜ìƒ ìŒì„ ê³¨ë¼ ì§ì ‘ ë‘ ìŒì˜ USADOë¥¼ ê³„ì‚°í–ˆë‹¤.

ì´í›„ ì¡´ì€ ë™ì–‘ìƒë“¤ì„ ë„¤íŠ¸ì›Œí¬ êµ¬ì¡°ë¡œ ë°”ê¿” ê° ë™ì˜ìƒì„ ì •ì ìœ¼ë¡œ ë‚˜íƒ€ë‚´ê¸°ë¡œ í–ˆë‹¤.

ë˜í•œ ì¡´ì€ ë™ì˜ìƒë“¤ì˜ ì—°ê²° êµ¬ì¡°ë¥¼ ì„œë¡œ ì—°ê²°ë˜ì–´ ìžˆëŠ” N-1ê°œì˜ ë™ì˜ìƒ ìŒìœ¼ë¡œ ë‚˜íƒ€ë‚´ì—ˆë‹¤.

ì¡´ì€ ìž„ì˜ì˜ ë‘ìŒ ì‚¬ì´ ë™ì˜ìƒì˜ ìœ ì‚¬ë„ë¥¼ ê·¸ ê²½ë¡œì˜ ëª¨ë“  ì—°ê²°ë“¤ì˜ ìœ ì‚¬ë„ ì¤‘ ìµœì†Ÿê°’ìœ¼ë¡œ í•˜ê¸°ë¡œ í–ˆë‹¤.

ì¡´ì€ ì–´ë–¤ ì£¼ì–´ì§„ MooTube ë™ì˜ìƒì— ëŒ€í•´ ê°’ Kë¥¼ ì •í•´ ê·¸ ë™ì˜ìƒê³¼ ìœ ì‚¬ë„ê°€ Kì´ìƒì¸ ëª¨ë“  ë™ì˜ìƒì´ ì¶”ì²œë˜ë„ë¡ í•  ê²ƒì´ë‹¤.

í•˜ì§€ë§Œ ì¡´ì€ ë„ˆë¬´ ë§Žì€ ë™ì˜ìƒì´ ì¶”ì²œë˜ë©´ ì†Œë“¤ì´ ì¼í•˜ëŠ” ê²ƒì— ë°©í•´ê°€ ë ê¹Œ ê±±ì •í•˜ê³  ìžˆë‹¤.

ë”°ë¼ì„œ ê·¸ëŠ” Kë¥¼ ì ì ˆí•œ ê°’ìœ¼ë¡œ ê²°ì •í•˜ë ¤í•œë‹¤.

ë†ë¶€ ì¡´ì€ ì–´ë–¤ Kê°’ì— ëŒ€í•œ ì¶”ì²œ ë™ì˜ìƒì˜ ê°œìˆ˜ë¥¼ ë¬»ëŠ” ì§ˆë¬¸ ì—¬ëŸ¬ê°œì— ë‹¹ì‹ ì´ ëŒ€ë‹µí•´ ì£¼ê¸°ë¥¼ ë°”ëž€ë‹¤.

**ìž…ë ¥**
- ì²«ì§¸ì¤„: N, Q
- 2 ~ n: ë™ì˜ìƒ ìŒì˜ ìœ ì‚¬ë„ ì‹œìž‘ë…¸ë“œ p, ì—°ê²° ë…¸ë“œ q, USADO r
- Q: ë†ë¶€ ì¡´ì˜ ì§ˆë¬¸ Q
    - k, q: k = ìœ ì‚¬ë„ q = íƒìƒ‰í•  ë…¸ë“œ

**ì¶œë ¥**

Qê°œì˜ ì§ˆë¬¸ì— ëŒ€í•œ ë‹µ

**ížŒíŠ¸**

1, 2ë²ˆ ë™ì˜ìƒì˜ ìœ ì‚¬ë„: 3

2, 3ë²ˆ ë™ì˜ìƒì˜ ìœ ì‚¬ë„: 2

2, 4ë²ˆ ë™ì˜ìƒì˜ ìœ ì‚¬ë„: 4

- 1, 4ë²ˆ ë™ì˜ìƒì˜ ìœ ì‚¬ë„: min(3, 4) = 3
- 1, 3ë²ˆ ë™ì˜ìƒì˜ ìœ ì‚¬ë„: min(3, 2) = 2



K=1ì¼ë•Œ 2ë²ˆ ë™ì˜ìƒ, K=3ì¼ë•Œ 1ë²ˆ ë™ì˜ìƒ, K=4ì¼ ë•Œ 1ë²ˆ ë™ì˜ìƒì„ ë³´ë©´ ê°ê° ëª‡ê°œì˜ ë™ì˜ìƒì´ ì¶”ì²œë  ê¹Œ ê¶ê¸ˆí•´í•œë‹¤.

1. K=1ì¸ ê²½ìš°
- 2ë²ˆ ë™ì˜ìƒì—ì„œ ì¶”ì²œë˜ëŠ” ì˜ìƒ: 1, 3, 4

2. K=4ì¸ ê²½ìš°
- 1ë²ˆ ë™ì˜ìƒì—ì„œ ì¶”ì²œë˜ëŠ” ì˜ìƒ: X

3. K=3ì¸ ê²½ìš°
- 1ë²ˆ ë™ì˜ìƒì—ì„œ ì¶”ì²œë˜ëŠ” ì˜ìƒ: 2, 4ë²ˆ ë™ì˜ìƒ

### í•´ê²° ë°©ì‹

`BFS`ë¥¼ í†µí•´ êµ¬í˜„

**ê³¼ì •**

1-2: 3

2-3: 2

2-4: 4

[[ ], [(2, 3)], [(3, 2), (4, 4)]]

Q. k = 1, v = 2

1. q = [(2, inf)]
2. ë¦¬ìŠ¤íŠ¸ì˜ 2ë²ˆì§¸ ë…¸ë“œ ì¡°ì‚¬: 2ë²ˆ ì˜ìƒê³¼ ìœ ì‚¬ë„ê°€ 1ì´ìƒì¸ ê²½ìš° ì¹´ìš´íŠ¸
    - n_v = 1, n_u = 3 ì¡°ì‚¬
        
        â†’ 2ë²ˆ, 1ë²ˆ ì˜ìƒì˜ USADO = 3 
        
        â†’ q = [(1, 3)], result = 1

    - n_v = 3, n_u = 2 
    
        â†’ 2ë²ˆ, 3ë²ˆ ì˜ìƒì˜ USADO = 2 
        
        â†’ q = [(1, 3), (3, 2)], result = 2

    - n_v = 4, n_u = 4 

        â†’ 2ë²ˆ, 4ë²ˆ ì˜ìƒì˜ USADO = 4 
        
        â†’q = [(1, 3), (3, 2), (4, 4)], result = 3

3. (1, 3) pop
    - n_v = 1, n_u = 2 

        â†’ q = [(3, 2), (4, 4)], result = 3 (ì´ë¯¸ ë°©ë¬¸í–ˆë˜ ë…¸ë“œì´ë¯€ë¡œ pass)
    - pop (3, 2), pop (4, 4)ë„ ë™ì¼

### ì½”ë“œ

```python
from collections import deque
import sys
input = sys.stdin.readline

n, q = map(int, input().split())
usados = [[] for _ in range(n+1)]

for _ in range(n-1):
    a, b, usado = map(int, input().split())
    usados[a].append((b, usado))
    usados[b].append((a, usado))

# ì—°ê²°ëœ ë…¸ë“œë“¤ì˜ ìœ ì‚¬ë„ ê³„ì‚°
for i in range(q):
    k, v = map(int, input().split())
    visited = [False] * (n+1)
    result = 0
    q = deque()
    q.append([v, float('inf')])
    visited[v] = True

    while q:
        v, usado = q.popleft()
        for n_v, n_u in usados[v]:
            n_u = min(usado, n_u)
            if n_u >= k and not visited[n_v]:
                result += 1
                q.append((n_v, n_u))
                visited[n_v] = 1
    print(result)
```