---
layout: post
title:  "빈 스코프(1)"
author: yj
category:  Spring🌱
tags: [ JAVA, SPRING ]
---

### <a href="#">빈 스코프</a>
- 빈이 존재할 수 있는 범위

**스프링이 지원하는 스코프**
1. 싱글톤: 기본 스코프, 스프링 컨테이너의 시작과 종료까지 유지되는 가장 넓은 범위의 스코프
2. 프로토타입: 프로토타입 빈의 생성과 의존관계 주입까지만 관여하는 짧은 범위의 스코프
3. 웹 관련 스코프
- request: 웹 요청이 들어오고 나갈 때까지 유지되는 스코프
- session: 웹 세션이 생성되고 종료될 때까지 유지되는 스코프
- application: 웹의 서블릿 컨텍스와 같은 범위로 유지되는 스코프

### <a href="#">프로토타입 스코프</a>
- 싱글톤 스코프와는 다르게 프로토타입 스코프는 스프링 컨테이너에 조회할 경우 스프링 컨테이너는 새로운 인스턴스를 생성하여 반환한다.

**프로토타입의 빈 요청**
1. 클라이언트가 prototypeBean 요청한다.
2. 요청 받은 동시에 스프링 컨테이너는 새로운 빈을 생성하고 의존관계를 주입하고 초기화 메서드 호출
4. 이후 같은 요청이 오면 새로운 프로토타입 빈을 생성해서 반환한다.

**특징**
- 스프링 컨테이너에 요청할 때마다 새로 생성
- 스프링 컨테이너는 빈의 생성, 의존관게 주입, 초기화에만 관여
- 종료 메서드가 호출되지 않음
- 따라서 조회한 클라이언트가 관리해야한다.

**싱글톤과 함께 사용할 경우 문제점**
- 싱글톤 빈이 프로토타입 빈을 사용하는 상황
- 싱글톤 빈은 의존관계를 주입을 받기 때문에 프로토타입 빈이 새로 생성되기는 한다.
- 하지만 싱글톤 빈과 함께 계속 유지된다.

### <a href="#">해결 방식: Provider</a>

**ObjectFactory, ObjectProvider**
- 지정한 빈을 컨테이너에서 대신 찾아주는 DL서비스를 제공하는 기능
- `ObjectProvider.getobject()`를 호출하면 내부에서 스프링 컨테이너를 통해 해당 빈을 찾아서 반환
- 스프링에 의존적임

**javax.inject.Provider**
- 자바 표준을 사용하는 방법
- 해당 라이브러리를 Gradle에 추가해줘야함
- `Provider.get()`을 통해 항상 새로운 프로토타입 빈 생성
- 특징
1. 기능이 단순하다
2. 별도의 라이브러리가 필요
3. 자바 표준이므로 다른 컨테이너에서도 사용 가능

##### [출처]
- [인프런 스프링 핵심 원리 기본편](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%ED%95%B5%EC%8B%AC-%EC%9B%90%EB%A6%AC-%EA%B8%B0%EB%B3%B8%ED%8E%B8)